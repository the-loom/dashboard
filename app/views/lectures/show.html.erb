<legend>Registrar asistencia "<%= @lecture.summary %>"</legend>

<div class="tagsort-tags-container"></div>

<%= form_tag(register_lecture_url(@lecture.id)) do %>

  <%= hidden_field_tag 'lecture_id', @lecture.id %>

  <div class="row members attendance">

    <% @students.each do |student| %>
      <div class="student col-md-2 col-xs-6 box" data-item-tags="<%= student.tags.map { |t| t.name.gsub(/\s(.)/) { |e| $1.upcase } }.join(',') %>">
        <img class="avatar<%= ' disabled' unless student.enabled? %>" src="<%= student.image %>">
        <br/>
        <div class="data">
          <%= check_box :student_ids, student.id, {checked: student.present_at(@lecture)} %>
          <strong><%= student.name %></strong>
          <br/>
          (<%= student.nickname %>)
        </div>
      </div>
    <% end %>

  </div>

  <div class="form-group">
    <%= submit_tag "Guardar asistencia", class: "btn btn-primary" %>
  </div>

<% end %>

<script>
    $(function () {
        $('.members .box').click(function (event) {
            if (event.target.type !== 'checkbox') {
                $(':checkbox', this).trigger('click');
            }
        });
        $('div.tagsort-tags-container').tagSort({
            items: '.student', tagElement: 'span', itemTagsSeperator: ' / ', sortType: 'exclusive', fadeTime: 0
        });
    });
</script>
