<legend>
  Listado de desafíos
  <% if policy(AutomaticCorrection::Repo).manage? %>
    <%= link_to 'Nuevo desafio', new_repo_path, class: 'btn btn-primary pull-right' %>
  <% end %>
</legend>

<section class="forks">

  <% if @repos.empty? %>

    <div class="alert alert-info">
      <p>Aún no hay ningún desafío</p>
    </div>

  <% else %>

    <table class="table table-striped">
      <thead>
      <tr>
        <th>Iniciador</th>
        <th>Enlace al desafío</th>
        <th>Dificultad</th>
        <th>Soluciones</th>
      </tr>
      </thead>
      <tbody>
      <% @repos.each do |repo| %>
        <tr class="fork">
          <td>
            <img class="avatar small" src="<%= repo.avatar_url %>" title="<%= repo.user %>" alt="<%= repo.user %>">
            <%= repo.user %>
          </td>
          <td>
            <%= link_to repo.full_name, repo_path(user: repo.user, name: repo.name) %>
          </td>
          <td>
            <% repo.difficulty.times do %>
              <i class="fa fa-star" aria-hidden="true"></i>
            <% end %>
            <% (5 - repo.difficulty).times do %>
              <i class="fa fa-star-o" aria-hidden="true"></i>
            <% end %>
          </td>
          <td><%= repo.forks.count %></td>
        </tr>
      <% end %>
      </tbody>
    </table>
  <% end %>
</section>
